(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__yB9Y0",Modal:"Modal_Modal__1HTE3",img:"Modal_img__174R0"}},12:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__l77Zu",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__2I0ds"}},24:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2JgDO"}},25:function(e,t,a){e.exports={button:"Button_button__31gH7"}},28:function(e,t,a){e.exports={App:"App_App__R2lWA",loader:"App_loader__EBYQR"}},29:function(e,t,a){e.exports=a(73)},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__23e2Z",SearchForm:"Searchbar_SearchForm__3GdBm",SearchForm_button:"Searchbar_SearchForm_button__2Hj_A",SearchForm_button_label:"Searchbar_SearchForm_button_label__1ftMn",SearchForm_input:"Searchbar_SearchForm_input__15Sjj"}},73:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(23),o=a.n(c),i=a(13),s=a(3),u=a.n(s),m=a(5),h=a(6),d=a(7),p=a(9),g=a(8),_=a(10),f=a(4),y=a.n(f),b=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={query:""},a.handleChange=function(e){a.setState({query:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.onSubmit(1,a.state.query),a.setState({query:""}),e.target.children[1].value=""},a}return Object(_.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("header",{className:y.a.Searchbar},l.a.createElement("form",{className:y.a.SearchForm,onSubmit:this.handleSubmit},l.a.createElement("button",{type:"submit",className:y.a.SearchForm_button},l.a.createElement("span",{className:y.a.SearchForm_button_label},"Search")),l.a.createElement("input",{className:y.a.SearchForm_input,onChange:this.handleChange,type:"text",placeholder:"Search images and photos"})))}}]),t}(r.Component),v=a(12),S=a.n(v),I=function(e){var t=e.galleryItem,a=e.id;return l.a.createElement("li",{className:S.a.ImageGalleryItem},l.a.createElement("img",{id:a,src:t,alt:"Gallery_image",className:S.a.ImageGalleryItem_image}))},E=a(24),k=a.n(E),O=function(e){var t=e.gallery;return l.a.createElement("ul",{className:k.a.ImageGallery},t.map((function(e){return l.a.createElement(I,{key:e.id,id:e.id,galleryItem:e.smallImage})})))},w=a(25),x=a.n(w),C=function(e){var t=e.onClickButton;return l.a.createElement("button",{className:x.a.button,onClick:t},"Load more")},G=a(26),M=a.n(G),j=a(11),N=a.n(j),F=function(e){var t=e.reference,a=e.onClick;return l.a.createElement("div",{className:N.a.Overlay,onClick:a},l.a.createElement("div",{className:N.a.Modal},l.a.createElement("img",{className:N.a.img,src:t,alt:""})))},B={margin:"0 auto",textAlign:"center"},A=function(e){var t=e.text;return l.a.createElement("h1",{style:B},"WHOOPS, SOMETHING WENT WRONG! ",l.a.createElement("br",null),t)},L=a(27),H=a.n(L),R=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a,r,l=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:1,(a=l.length>1?l[1]:void 0)&&(n=a),e.prev=3,e.next=6,H.a.get("".concat("https://pixabay.com/api/","?q=").concat(n,"&page=").concat(t,"&key=").concat("15186687-c8899e25e7ccca39bde413bd9","&image_type=photo&orientation=horizontal&per_page=").concat("12"));case 6:return r=e.sent,e.abrupt("return",r.data.hits);case 10:throw e.prev=10,e.t0=e.catch(3),console.log(e.t0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),T=a(28),q=a.n(T),W={margin:"0 auto"},D=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={gallery:[],isModalOpen:!1,isLoading:!0,currentImage:"",page:1,error:null},a.openModal=function(){return a.setState({isModalOpen:!0})},a.closeModal=function(){return a.setState({isModalOpen:!1})},a.transform=function(e){return e.map((function(e){return{id:e.id,smallImage:e.webformatURL,largeImage:e.largeImageURL}}))},a.handleFetchGallery=function(){var e=Object(m.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t,n);case 3:r=e.sent,a.setState({gallery:a.transform(r),isLoading:!1}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a.setState({error:e.t0}),console.log(e.t0);case 11:window.addEventListener("keydown",a.handleKeyPress);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),a.handleClickButton=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),t=a.state.page+1,e.next=4,R(t);case 4:n=e.sent,a.setState((function(e){return{gallery:[].concat(Object(i.a)(e.gallery),Object(i.a)(a.transform(n))),page:t,isLoading:!1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});case 7:case"end":return e.stop()}}),e)}))),a.handleClickBox=function(e){var t=a.state.gallery.find((function(t){return parseInt(t.id)===parseInt(e.target.id)}));t&&(a.setState({currentImage:t.largeImage}),a.openModal())},a.handleKeyPress=function(e){"Escape"===e.code&&a.closeModal()},a.handleBackdropClick=function(e){return e.target===e.currentTarget&&a.closeModal()},a}return Object(_.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.page;this.handleFetchGallery(e,"all")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.state,t=e.gallery,a=e.currentImage,n=e.error,r=e.isLoading,c=e.isModalOpen;return l.a.createElement("div",{className:q.a.App,onClick:this.handleClickBox},l.a.createElement(b,{onSubmit:this.handleFetchGallery}),n&&l.a.createElement(A,{text:n.message}),t.length>0&&l.a.createElement(O,{gallery:t}),r&&l.a.createElement(M.a,{style:W,type:"ThreeDots",color:"#somecolor",height:80,width:80}),t.length>0&&l.a.createElement(C,{onClickButton:this.handleClickButton}),c&&l.a.createElement(F,{onClose:this.closeModal,onClick:this.handleBackdropClick,reference:a}))}}]),t}(r.Component);o.a.render(l.a.createElement(D,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.b396ebfe.chunk.js.map