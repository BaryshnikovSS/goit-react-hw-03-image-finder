{"version":3,"sources":["Components/modal/Modal.module.css","Components/imageGallery/imageGelleryItem/ImageGalleryItem.module.css","Components/imageGallery/ImageGallery.module.css","Components/button/Button.module.css","Components/App.module.css","Components/searchbar/Searchbar.module.css","services/gallery-api.js","Components/searchbar/Searchbar.js","Components/imageGallery/imageGelleryItem/ImageGalleryItem.js","Components/imageGallery/ImageGallery.js","Components/button/Button.js","Components/modal/Modal.js","Components/errors/errorNotification/ErrorNotification.js","Components/App.js","index.js"],"names":["module","exports","currentQuery","Searchbar","state","query","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","children","className","css","SearchForm","this","type","SearchForm_button","SearchForm_button_label","SearchForm_input","onChange","placeholder","Component","ImageGalleryItem","galleryItem","id","src","alt","ImageGalleryItem_image","ImageGallery","gallery","map","elem","key","smallImage","Button","onClickButton","button","onClick","Modal","reference","Overlay","img","margin","textAlign","ErrorNotification","text","style","fetchGallery","a","page","axios","get","process","data","hits","console","log","Error","loaderCss","App","isModalOpen","isLoading","currentImage","error","openModal","closeModal","transform","webformatURL","largeImage","largeImageURL","handleFetchGallery","window","addEventListener","handleKeyPress","handleClickButton","nextPage","prevState","scrollTo","top","document","documentElement","scrollHeight","behavior","handleClickBox","fined","find","parseInt","code","handleBackdropClick","currentTarget","removeEventListener","message","length","color","height","width","onClose","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b396ebfe.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__yB9Y0\",\"Modal\":\"Modal_Modal__1HTE3\",\"img\":\"Modal_img__174R0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__l77Zu\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__2I0ds\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2JgDO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__31gH7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__R2lWA\",\"loader\":\"App_loader__EBYQR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__23e2Z\",\"SearchForm\":\"Searchbar_SearchForm__3GdBm\",\"SearchForm_button\":\"Searchbar_SearchForm_button__2Hj_A\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__1ftMn\",\"SearchForm_input\":\"Searchbar_SearchForm_input__15Sjj\"};","import axios from \"axios\";\r\n\r\nlet currentQuery;\r\n\r\nexport const fetchGallery = async (page = 1, query) => {\r\n\r\n  if (query) currentQuery = query;\r\n\r\n  try {\r\n    const data = await axios.get(\r\n      `${process.env.REACT_APP_BASE_URL}?q=${currentQuery}&page=${page}&key=${process.env.REACT_APP_USER_KEY}&image_type=photo&orientation=horizontal&per_page=${process.env.REACT_APP_PER_PAGE}`\r\n    );\r\n    return data.data.hits;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new Error(error);\r\n  }\r\n};","import React, { Component } from \"react\";\r\nimport css from \"./Searchbar.module.css\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {query: ''};\r\n\r\n  handleChange = e => {\r\n      this.setState({query: e.target.value})\r\n  }\r\n\r\n  handleSubmit = e => {\r\n      e.preventDefault();\r\n      this.props.onSubmit(1, this.state.query);\r\n      this.setState({query: ''})\r\n      e.target.children[1].value = \"\";\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header className={css.Searchbar}>\r\n        <form className={css.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={css.SearchForm_button}>\r\n            <span className={css.SearchForm_button_label}>Search</span>\r\n          </button>\r\n          <input\r\n            className={css.SearchForm_input}\r\n            onChange={this.handleChange}\r\n            type=\"text\"\r\n            // autocomplete = \"off\"\r\n            // autofocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React from \"react\";\r\nimport css from \"./ImageGalleryItem.module.css\";\r\n\r\nconst ImageGalleryItem = ({ galleryItem, id }) => (\r\n  <li className={css.ImageGalleryItem}>\r\n    <img id={id} src={galleryItem} alt=\"Gallery_image\" className={css.ImageGalleryItem_image} />\r\n  </li>\r\n);\r\n\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport ImageGalleryItem from \"./imageGelleryItem/ImageGalleryItem\";\r\nimport css from \"./ImageGallery.module.css\";\r\n\r\nconst ImageGallery = ({ gallery }) =>  (\r\n    <ul className={css.ImageGallery}>\r\n      {gallery.map(elem => (\r\n        <ImageGalleryItem key={elem.id} id={elem.id} galleryItem={elem.smallImage} />\r\n      ))}\r\n    </ul>\r\n  );\r\n\r\nexport default ImageGallery;\r\n","import React from \"react\";\r\nimport css from './Button.module.css'\r\n\r\nconst Button = ({ onClickButton }) => (\r\n  <button className={css.button} onClick={onClickButton}>\r\n    Load more\r\n  </button>\r\n);\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport css from \"./Modal.module.css\";\r\n\r\n// При клике по элементу галереи должно открываться модальное окно с темным оверлеем и отображаться большая\r\n// версия изображения. Модальное окно должно закрываться по нажатию клавиши ESC или по клику на оверлее.\r\n\r\nconst Modal = ({ reference, onClick }) => (\r\n  <div className={css.Overlay} onClick={onClick}>\r\n    <div className={css.Modal}>\r\n      <img className={css.img} src={reference} alt=\"\" />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\n\r\nconst css = { margin: \"0 auto\", textAlign: \"center\" };\r\n\r\nconst ErrorNotification = ({ text }) => (\r\n  <h1 style={css}>\r\n    WHOOPS, SOMETHING WENT WRONG! <br />\r\n    {text}\r\n  </h1>\r\n);\r\n\r\nexport default ErrorNotification;\r\n","import React, { Component } from \"react\";\r\nimport Searchbar from \"./searchbar/Searchbar\";\r\nimport ImageGallery from \"./imageGallery/ImageGallery\";\r\nimport Button from \"./button/Button\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport Modal from \"./modal/Modal\";\r\nimport ErrorNotification from \"./errors/errorNotification/ErrorNotification\";\r\nimport { fetchGallery } from \"../services/gallery-api\";\r\nimport css from \"./App.module.css\";\r\n\r\nconst loaderCss = { margin: \"0 auto\" };\r\n\r\nclass App extends Component {\r\n  state = {\r\n    gallery: [],\r\n    isModalOpen: false,\r\n    isLoading: true,\r\n    currentImage: \"\",\r\n\r\n    page: 1,\r\n    error: null\r\n  };\r\n\r\n  openModal = () => this.setState({ isModalOpen: true });\r\n\r\n  closeModal = () => this.setState({ isModalOpen: false });\r\n\r\n  transform = data =>\r\n    data.map(elem => ({\r\n      id: elem.id, //уникальный идентификатор\r\n      smallImage: elem.webformatURL, //ссылка на маленькое изображение для списка карточек\r\n      largeImage: elem.largeImageURL //ссылка на большое изображение для модального окна\r\n    }));\r\n\r\n  componentDidMount() {\r\n    const { page } = this.state;\r\n    this.handleFetchGallery(page, \"all\");\r\n  }\r\n\r\n  handleFetchGallery = async (page, query) => {\r\n    try {\r\n      const data = await fetchGallery(page, query);\r\n      this.setState({ gallery: this.transform(data), isLoading: false });\r\n    } catch (error) {\r\n      this.setState({ error });\r\n      console.log(error);\r\n    }\r\n\r\n    window.addEventListener(\"keydown\", this.handleKeyPress);\r\n  };\r\n\r\n  handleClickButton = async () => {\r\n    this.setState({ isLoading: true });\r\n\r\n    const nextPage = this.state.page + 1;\r\n    const data = await fetchGallery(nextPage);\r\n\r\n    this.setState(prevState => {\r\n      return {\r\n        gallery: [...prevState.gallery, ...this.transform(data)],\r\n        page: nextPage,\r\n        isLoading: false\r\n      };\r\n    });\r\n\r\n    // При нажатии на кнопку Load more должна догружаться следующая порция изображений и рендериться вместе\r\n    // с предыдущими. После загрузки и рендера новой партии изображений страница должна плавно скролиться.\r\n    // Для скрола используй следующий код.\r\n\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: \"smooth\"\r\n    });\r\n\r\n    // Кнопка должна рендерится только тогда, когда есть какие-то загруженные изобаржения.\r\n    // Если массив изображений пуст, кнопка не рендерится.\r\n  };\r\n\r\n  handleClickBox = e => {\r\n    const { gallery } = this.state;\r\n    const fined = gallery.find(\r\n      elem => parseInt(elem.id) === parseInt(e.target.id)\r\n    );\r\n\r\n    if (fined) {\r\n      this.setState({ currentImage: fined.largeImage });\r\n      this.openModal();\r\n    }\r\n  };\r\n\r\n  handleKeyPress = e => {\r\n    if (e.code !== \"Escape\") return;\r\n    this.closeModal();\r\n  };\r\n\r\n  handleBackdropClick = e => e.target === e.currentTarget && this.closeModal();\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyPress);\r\n  }\r\n\r\n  render() {\r\n    const { gallery, currentImage, error, isLoading, isModalOpen } = this.state;\r\n\r\n    return (\r\n      <div className={css.App} onClick={this.handleClickBox}>\r\n        <Searchbar onSubmit={this.handleFetchGallery} />\r\n        {error && <ErrorNotification text={error.message} />}\r\n        {gallery.length > 0 && <ImageGallery gallery={gallery} />}\r\n        {isLoading && (\r\n          <Loader\r\n            style={loaderCss}\r\n            type=\"ThreeDots\"\r\n            color=\"#somecolor\"\r\n            height={80}\r\n            width={80}\r\n          />\r\n        )}\r\n        {gallery.length > 0 && (\r\n          <Button onClickButton={this.handleClickButton} />\r\n        )}\r\n        {isModalOpen && (\r\n          <Modal\r\n            onClose={this.closeModal}\r\n            onClick={this.handleBackdropClick}\r\n            reference={currentImage}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './Components/App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}